const { Telegraf } = require("telegraf");
const express = require("express");

const app = express();

// Ð‘ÐµÑ€ÐµÐ¼ Ñ‚Ð¾ÐºÐµÐ½ Ð¸Ð· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
const bot = new Telegraf(process.env.BOT_TOKEN);

// ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° /start
bot.start((ctx) => {
  ctx.reply("ÐŸÑ€Ð¸Ð²ÐµÑ‚! ðŸ‘‹ Ð¯ Ñ‚Ð²Ð¾Ð¹ ASTI Stylist Bot. Ð“Ð¾Ñ‚Ð¾Ð² Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ñ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼!");
});

// ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
bot.hears("ÐŸÑ€Ð¸Ð²ÐµÑ‚", (ctx) => ctx.reply("ÐŸÑ€Ð¸Ð²ÐµÑ‚! ÐšÐ°Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ?"));

// Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°
bot.launch();

// Express ÑÐµÑ€Ð²ÐµÑ€ Ð´Ð»Ñ Render (Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð½ Ð½Ðµ Ð·Ð°ÑÑ‹Ð¿Ð°Ð»)
app.get("/", (req, res) => {
  res.send("ASTI Bot is running!");
});

app.listen(process.env.PORT || 3000, () => {
  console.log("Server is running...");
});
